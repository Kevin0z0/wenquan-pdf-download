# wenquan-pdf-download
文泉学堂pdf一键下载脚本

#### 本项目正式关闭不再更新，感谢大家的支持

---

**请自觉遵守法律法规，本脚本仅供学习参考，所有下载的pdf请在24小时内删除，请勿传播或进行营利，一切法律责任由用户自己承担，与本人无关**

该脚本在油猴插件中运行，插件安装方式百度

脚本安装地址：https://greasyfork.org/zh-CN/scripts/396025-%E6%96%87%E6%B3%89%E5%AD%A6%E5%A0%82pdf%E4%B8%8B%E8%BD%BD

**2.10更新**
>
> 因为网站出了很多限制导致下载失败，现在改成了没隔50页自动保存一次，对应的代码在文件的第14行，可根据实际情况自行修改这个值
>
> 每50页的最后一页可能获取失败，请用鼠标滚轮上下滚动，等图片加载出来会继续下载下面50页
>
> chrome第一次下载可能会提示是否保存多个文件，直接点是，下面就会自动保存了
>
> 最后下载下来的文件可能会很多，pdf合成的软件也已经更新,请在release中下载
>

**2.9更新（不稳定，偶尔会提示身份过期，需要刷新重下）**
>
> 重构代码，采用模拟鼠标滚动的方式获取图片，会从你当前所在的图片页数开始下起，如果要从第一页开始的话，当前的页数必须为1
>
> 下载的时候不要最小化页面，请新建一个窗口下载(不懂看这个 https://i.loli.net/2020/02/10/ZH5q9p7PlXoOw4Q.gif )
>
> 删除了下载的按钮，直接点击图片就可以下载了
>
> 图片跳转到最后一张不一定意味着下完了，还会自动返回去保存没有跳出来的图
>

**2.8更新**
```
支持横版pdf保存

如果不小心关闭页面会提示是否关闭，再也不担心手滑啦

添加手动保存和继续下载功能，只需点击原来的下载键
```

**添加了pdf目录生成小工具**
```
已经将exe发到release中，自行下载
将下载完的pdf放到与exe同一目录
在cookie.txt中填入从网页中获取到的cookie值，在下载pdf的页面按F12，在console中输入document.cookie就能拿到cookie值
点击exe，输入url后缀的书号就可以下载
是书号！不是书名！不是书名！不是书名！
```

**2.6小更新**
```
很多朋友都会误入收费的那个页面导致下载不成功，下载可以自动跳到免费的页面了
```

**2.5再次更新**
```
支持页面选择

5次连续出错之后会自动退出并保存之前下载的pdf，如果刷新之后可以用的话直接修改页数就能继续了，pdf合并请自行找软件

```
**2.5更新**
```
增加MD5校验，再也不会下载到 "加载中" 这张图了

添加间隔时间，在5秒到12秒之间（请不要私自去掉这个功能，给大清华的服务器减少点压力，对大家都好）

添加连续出错三次自动退出的功能，再也不会卡在原地不动啦

下载图片要先登录哦
```
**待添加**
```
超时重新下载
```

点颗小星星哦亲

目前依旧可以运行的同类项目
[wqxuetang-pdf-downloader](https://github.com/SweetInk/wqxuetang-pdf-downloader) 
